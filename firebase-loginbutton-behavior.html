<script>
FirebaseLoginbuttonBehavior = function(superClass) {
    return class extends superClass {
        connectedCallback() {
          if (super.connectedCallback) {
            super.connectedCallback();
            this.initListeners();
          }
        }

        static get properties() {
            return {
                user: {
                    type: Object,
                    value: {}
                }
            }
        }

        initListeners() {
            var that = this;
            document.addEventListener('firebase-signin', this.signin.bind(this), false);
            document.addEventListener('firebase-signout', this.signout.bind(this), false);
        }

        _userChanged(user) {
            if (typeof user.email === "undefined") {
                
            }
        }

        signin(payload) {
            if (payload) {
                this.user = payload.detail.user;
            }
        }

        signout() {
            this.user = {};
        }

        _showMessageSignout() {
            Polymer.dom(this.root).querySelector('#message').innerHTML = '<div class="card">'+
                '<h1><img style="margin:0 20px;" src="https://firebasestorage.googleapis.com/v0/b/koffee-4740e.appspot.com/o/login.svg?alt=media&token=009f61d3-6c7c-4677-b102-210d27226f6a" width="40" />' +
                'Usa tu usuario de Kairós para logarte</h1>' +
                '<p class="clear"></p>' +
                '</div>';
        }

        /*
        initApp() {
            //firebase.auth().onAuthStateChanged(function(user) {
            if (this.user) {
                //this.user = user;
                var displayName = user.displayName;
                var email = user.email;
                var emailVerified = user.emailVerified;
                var photoURL = user.photoURL;
                var isAnonymous = user.isAnonymous;
                var uid = user.uid;
                var providerData = user.providerData;
                //Polymer.dom(this.root).querySelector('.user-details-container').textContent = email;
                Polymer.dom(this.root).querySelector('#message').innerHTML = '';
                this._isAuthorized(email);
            } else {
                //Polymer.dom(this.root).querySelector('.user-details-container').textContent = '';
                Polymer.dom(this.root).querySelector('#message').innerHTML = '<div class="card">'+
                '<h1><img style="margin:0 20px;" src="https://firebasestorage.googleapis.com/v0/b/koffee-4740e.appspot.com/o/login.svg?alt=media&token=009f61d3-6c7c-4677-b102-210d27226f6a" width="40" />' +
                'Usa tu usuario de Kairós para logarte</h1>' +
                '<p class="clear"></p>' +
                '</div>';
            }
            //}.bind(this));
        }
        // */

    }
}
</script>